<html>
<head>
	<link rel="stylesheet" type="text/css" media="screen" href="demos.css" />

	<!-- JQuery Library -->
	<script type="text/JavaScript" language="javascript" src="js/jquery/jquery-1.4.2.min.js"></script>

	<!-- JQuery UI Library -->
	<link rel="stylesheet" type="text/css" media="screen" href="js/jquery/ui/css/orange/jquery-ui-1.8.5.custom.css" />
	<script type="text/JavaScript" language="javascript" src="js/jquery/ui/jquery-ui-1.8.5.custom.min.js"></script>

	<!-- JQuery JSON Library -->
	<script type="text/JavaScript" language="javascript" src="js/jquery/jquery.json.js"></script>
    
    <!-- Chat Library -->
    <script src="js/jquery/jquery.ui.chatbox.js" type="text/javascript" charset="utf-8"></script>      
    <link type="text/css" href="js/jquery/ui/css/jquery.ui.chatbox.css" rel="stylesheet" />    
    <script src="js/chat.js" type="text/javascript" charset="utf-8"></script> 

    <!-- jQueryFileTree Library -->
		<script src="js/jquery/jqueryFileTree/jqueryFileTree.js" type="text/javascript"></script> 
		<link href="js/jquery/jqueryFileTree/jqueryFileTree.css" rel="stylesheet" type="text/css" media="screen" /> 

    <!-- Our Functions -->
	<script type="text/JavaScript" language="javascript" src="student/js/buttons.js"></script>
	<script type="text/JavaScript" language="javascript" src="student/js/modal.js"></script>
	<script type="text/JavaScript" language="javascript" src="student/js/print.js"></script>
	<script type="text/JavaScript" language="javascript" src="student/js/utils.js"></script>
	<script type="text/JavaScript" language="javascript" src="student/js/connection.js"></script>

	<meta charset="UTF-8" />
	
	<style>
		.ui-menu { position: absolute; width: 100px; }


		#themes {padding-left: 20px; background: url(images/icon_gallery.gif) no-repeat left 50%;}
		
		.ui-default-state {
			padding: .5em 1em;
			cursor: pointer;
		}
		#themes {padding-left: 20px; font-size: 1.2em; background: url(images/icon_gallery.gif) no-repeat left 50%;}
		#set {border: 2px solid #ddd; padding: 2px; background: #444; float: left;}
		#set a {margin: 2px; border: 1px solid #444; float: left;}
		#set a:hover {border-color: #fff;}

	</style>

    <script type="text/javascript" charset="utf-8">
            function showIfError(response) {
                if (response.status == 'ok')
                    return false;
                for (var err in response.errors) {
                    $("#chat_div").chatbox("option", "boxManager").addMsg(response.status , response.errors[err]);
                };
                return true;
            };

            function cmdSubmitCallback(response) {
                showIfError(response);
            };

            function getChatMessageCallback(response) {
                showIfError(response);
                
                $("#chat_div").chatbox("option", "boxManager").addMsg(response.user, response.message);
                getChatMessage();
            };

            function getChatMessage(data) {
                var data = data || {};
                $.get(conf.getChatURL(), data, getChatMessageCallback, 'json');
            };

    
      $(document).ready(function(){


				$("#tabsStudent").tabs();
				$("#dialogSendFile").dialog({ autoOpen: false });


                function Configuration() {
                    this.userName = '%(student_id)';
                    this.channel = 'controlaula-chat';
                    this.server = './';                   
                };
                            
                Configuration.prototype.getChatURL = function() {
                    return this.server + this.userName;
                };
                Configuration.prototype.getChatClassURL = function() {
                    return this.server + this.channel;
                };                
                Configuration.prototype.copyForRequest = function() {
                    return {user: this.userName};
                };

                conf = new Configuration();
                
                getChatMessage();		 
		 
      });
    </script>
	
</head>

<body style="background-image:url('img/controlaula.png'); background-repeat:no-repeat; background-position:top right; padding:3px;">

	<div id="tabsStudent" style="width:60%">
		<ul>
			<li><a href="#tabs-1">Acciones</a></li>
		</ul>
		<div id="tabs-1" style="padding:2px;">
			<table width="100%">
				<tr>
					<td style="text-align:center; padding:30px;"><button id="sendFileStudent" style="width:160px;">Enviar Fichero</button></td>
					<td style="text-align:center;"><button id="receivedFileStudent" style="width:160px;">Ficheros Recibidos</button></td>
				</tr>
				<tr>
					<td style="text-align:center; padding:30px;"><button id="chatClassroom" style="width:160px;">Chat de clase</button></td>
					<td style="text-align:center;"><button id="chatTeacher" style="width:160px;">Chat con Profesor</button></td>
				</tr>
			</table>
		</div>
	</div>
    
     <div id="chat_div"> </div>

     <div id="chataula_div">  </div>

	<div id="dialogSendFile">
		<div id="sendFileTree" style="overflow: scroll; height:300px;"></div> 
	</div>
    
	<div id="dialogAlert" title="Atenci&oacute;n">
		<p>
			<span style="float:left; margin:0 7px 7px 0;"></span>
			<span id="dialogAlertMessage"></span>
		</p>
	</div>    
</body>

